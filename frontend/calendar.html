<!DOCTYPE html>
<html>

<head>

<title>ìº˜ë¦°ë”</title>

<style>

body{

text-align:center;
font-family:sans-serif;

}

.calendar{

display:grid;
grid-template-columns:repeat(7,1fr);

gap:10px;

margin:40px;

}

.day{

padding:20px;

background:#ffeef3;

border-radius:10px;

cursor:pointer;

}

#recordBox{

display:none;

margin:20px;

}

img{

max-width:200px;

margin-top:10px;

}

</style>

</head>

<body>

<h1>ğŸ“… ìš°ë¦¬ì˜ ë‚ ì§œ</h1>

<div class="calendar" id="calendar"></div>

<div id="recordBox">

<h3 id="selectedDate"></h3>

<input type="file" id="photo">
<div id="imagePreview"></div>

<br><br>

<textarea id="recordText">
</textarea>

<h4>ì˜¤ëŠ˜ ë¶„ìœ„ê¸° ì„ íƒ</h4>

<div id="emojiPicker">

<button onclick="selectEmoji('â¤ï¸')">â¤ï¸</button>

<button onclick="selectEmoji('ğŸ˜†')">ğŸ˜†</button>

<button onclick="selectEmoji('ğŸŒ¸')">ğŸŒ¸</button>

<button onclick="selectEmoji('ğŸ¬')">ğŸ¬</button>

<button onclick="selectEmoji('ğŸ°')">ğŸ°</button>

</div>

<br><br>

<button onclick="saveRecord()">ì €ì¥</button>

<button id="scheduleBtn"
onclick="addSchedule()">
ì¼ì • ì¶”ê°€
</button>

<div id="preview"></div>

</div>

<script>

const photo=
document.getElementById("photo");

const preview =
document.getElementById(
"imagePreview"
);

photo.addEventListener(
"change",
()=>{

const file =
photo.files[0];

if(!file)return;

const reader =
new FileReader();

reader.onload=function(e){

preview.innerHTML="";

const img =
document.createElement("img");

img.src=e.target.result;

img.style.width="150px";

img.style.borderRadius="10px";

preview.appendChild(img);

};

reader.readAsDataURL(file);

});

let selectedEmoji="";

function selectEmoji(emoji){

selectedEmoji=emoji;

function selectEmoji(emoji){

selectedEmoji=emoji;

document
.querySelectorAll(
"#emojiPicker button"
)
.forEach(btn=>{

btn.classList
.remove("selectedEmoji");

});

event.target
.classList
.add("selectedEmoji");

}

}

const calendar=document.getElementById("calendar");
let currentDay=null;

for(let i=1;i<=30;i++){

const day=document.createElement("div");

day.className="day";

let text=i+"ì¼";

// ê¸°ë¡ í™•ì¸
const record=localStorage.getItem("record_"+i);

if(record){

text+=" â¤ï¸";

}

// ì¼ì • í™•ì¸
const schedule=localStorage.getItem("schedule_"+i);

if(schedule){

const data=JSON.parse(schedule);

text+=" "+data.emoji;

}

day.innerText=text;

day.addEventListener("click",()=>{

currentDay=i;

showMenu();

});

calendar.appendChild(day);

}

function saveRecord(){

const text=document.getElementById("text").value;

const photo=document.getElementById("photo").files[0];

if(photo){

const reader=new FileReader();

reader.onload=function(){

localStorage.setItem(

"record_"+currentDay,

JSON.stringify({
image:reader.result,
emoji:selectedEmoji
})

);

alert("ì €ì¥ ì™„ë£Œ!");

loadRecord();

};

reader.readAsDataURL(photo);

}else{

localStorage.setItem(

"record_"+currentDay,

JSON.stringify({

text:text

})

);

alert("ì €ì¥ ì™„ë£Œ!");

loadRecord();

}

}

function loadRecord(){

const data=localStorage.getItem(

"record_"+currentDay

);

const preview=document.getElementById("preview");

preview.innerHTML="";

document.getElementById("text").value="";

if(data){

const record=JSON.parse(data);

document.getElementById("text").value=

record.text || "";

if(record.image){

const img=document.createElement("img");

img.src=record.image;

preview.appendChild(img);

}

}

const record =
localStorage.getItem(
"record_"+currentDay
);

const btn =
document.getElementById(
"scheduleBtn"
);

if(record){

const data =
JSON.parse(record);

btn.disabled =
!data.image;

}else{

btn.disabled=true;

}

}

function showMenu(){

const record=
localStorage.getItem(
"record_"+currentDay
);

const schedule=
localStorage.getItem(
"schedule_"+currentDay
);

// ì´ë¯¸ ê¸°ë¡ ìˆìœ¼ë©´ ë³´ê¸°
if(record || schedule){

showDetail();

return;

}

// ì—†ìœ¼ë©´ ì…ë ¥ì°½ ì—´ê¸°
document.getElementById(
"recordBox"
).style.display="block";

document.getElementById(
"selectedDate"
).innerText=currentDay+"ì¼ ê¸°ë¡";

loadRecord();

}

function addSchedule(){

// ê¸°ë¡ í™•ì¸
const record =
localStorage.getItem(
"record_"+currentDay
);

// ê¸°ë¡ ì—†ìœ¼ë©´ ì°¨ë‹¨
if(!record){

alert(
"ë¨¼ì € ì´ë¯¸ì§€ ê¸°ë¡ì„ ì‘ì„±í•´ì•¼ ì¼ì • ì¶”ê°€ ê°€ëŠ¥í•´ìš” ğŸ“¸"
);

return;

}

// ì´ë¯¸ì§€ ìˆëŠ”ì§€ í™•ì¸
const recordData =
JSON.parse(record);

if(!recordData.image){

alert(
"ì‚¬ì§„ ê¸°ë¡ì„ ë¨¼ì € ë“±ë¡í•´ì£¼ì„¸ìš” ğŸ“¸"
);

return;

}

// ì¼ì • ì…ë ¥
const text =
prompt("ì¼ì • ì…ë ¥");

if(!text)return;

// emoji ì„ íƒ
const emoji =
prompt("ì¼ì • ì´ëª¨ì§€ â¤ï¸ ğŸŒ¸ ğŸ¬");

localStorage.setItem(

"schedule_"+currentDay,

JSON.stringify({

text:text,

emoji:emoji

})

);

alert("ì¼ì • ì €ì¥ ì™„ë£Œ!");

showDetail();

}

function showDetail(){

let message=currentDay+"ì¼\n";

const schedule=

localStorage.getItem(

"schedule_"+currentDay

);

if(schedule){

const data=JSON.parse(schedule);

message+=data.emoji+" "+data.title+"\n";

}

const record=

localStorage.getItem(

"record_"+currentDay

);

if(record){

const data=JSON.parse(record);

message+="\nê¸°ë¡:\n"+(data.text||"");

}

const edit=confirm(

message+"\n\nìˆ˜ì •í• ê¹Œìš”?"

);

if(edit){

document.getElementById("recordBox").style.display="block";

document.getElementById("selectedDate").innerText=

currentDay+"ì¼ ê¸°ë¡";

loadRecord();

}

}

</script>

</body>

</html>